

/** Move to a certain location  */
option move_to {
 
  float @x;
  float @y;
 
 
 initial state adjust_direction {
  decision {
   if (directionToPoint(x = @x,
                    y = @y) == getDirection) {
    goto move_forward;
   } else if (turnWhichWay(to = directionToPoint
                            (x = currentDestinationX
                                     (packet=currentPacket),
                             y = currentDestinationY
                                     (packet=currentPacket))))
     {
      goto turn_right; 
      
   } else {
      goto turn_left;
   }
  }
  
  action {}
 }
 
 state turn_left {
  decision {
   goto adjust_direction;
  }
  
  action {
   turnLeft();
  }
  
 }
 
 state turn_right {
  decision {
   goto adjust_direction;
  }
  action {
   turnRight();
  }
 }
 
 state move_forward {
  decision {
   goto adjust_direction;
  }
  action {
   moveForward();
  }
  
 }
}
